{% extends "base.html" %}
{% load url from future %}

{% block content %}
<form method="post" action="{% url 'django.contrib.auth.views.login' %}" class="yform" id="login">
{% csrf_token %}
<fieldset>
  <legend>Login</legend>
  <div class="type-text{% if form.errors %} error{% endif %}">
    {% if form.errors %}<strong class="message">Your username and password didn't match. Please try again.</strong>{% endif %}
    {{ form.username.label_tag }}
    {{ form.username }}
  </div>
  <div class="type-text{% if form.errors %} error{% endif %}">
    {{ form.password.label_tag }}
    {{ form.password }}
  </div>
  <div class="type-button">
    <input type="submit" value="Login" />
    <input type="hidden" name="next" value="{{ next }}" />
  </div>
</form>
<script type="text/javascript">
$(document).ready(function(){
  $('form#login').submit(function () {
    var username = $('input#id_username');
    var password = $('input#id_password');
    for (var i = 0; i < 10; i++) {
      password.val($.sha1(username.val()+':'+password.val()));
    }
  });
});
</script>
{% endblock %}
